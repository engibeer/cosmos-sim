<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>GADGET-2: init.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>init.c File Reference</h1>Code for initialisation of a simulation from initial conditions. <a href="#_details">More...</a>
<p>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;math.h&gt;</code><br>
<code>#include &lt;mpi.h&gt;</code><br>
<code>#include "<a class="el" href="allvars_8h-source.html">allvars.h</a>"</code><br>
<code>#include "<a class="el" href="proto_8h-source.html">proto.h</a>"</code><br>

<p>
<a href="init_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="init_8c.html#a0">init</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="init_8c.html#a1">check_omega</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="init_8c.html#a2">setup_smoothinglengths</a> (void)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Code for initialisation of a simulation from initial conditions. 
<p>

<p>
Definition in file <a class="el" href="init_8c-source.html">init.c</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="a1" doxytag="init.c::check_omega"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void check_omega           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This routine computes the mass content of the box and compares it to the specified value of Omega-matter. If discrepant, the run is terminated. 
<p>
Definition at line <a class="el" href="init_8c-source.html#l00165">165</a> of file <a class="el" href="init_8c-source.html">init.c</a>.
<p>
References <a class="el" href="allvars_8c-source.html#l00111">All</a>, <a class="el" href="allvars_8c-source.html#l00119">P</a>, and <a class="el" href="allvars_8c-source.html#l00011">ThisTask</a>.
<p>
Referenced by <a class="el" href="init_8c-source.html#l00020">init()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="init.c::init"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void init           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function reads the initial conditions, and allocates storage for the tree. Various variables of the particle data are initialised and An intial domain decomposition is performed. If SPH particles are present, the inial SPH smoothing lengths are determined.<p>
&lt; The simulated timespan is mapped onto the integer interval [0,TIMESPAN], where TIMESPAN needs to be a power of 2. Note that (1&lt;&lt;28) corresponds to 2^29 <p>
&lt; The simulated timespan is mapped onto the integer interval [0,TIMESPAN], where TIMESPAN needs to be a power of 2. Note that (1&lt;&lt;28) corresponds to 2^29 <p>
&lt; defines maximum length of neighbour list <p>
&lt; adiabatic index of simulated gas <p>
&lt; adiabatic index of simulated gas 
<p>
Definition at line <a class="el" href="init_8c-source.html#l00020">20</a> of file <a class="el" href="init_8c-source.html">init.c</a>.
<p>
References <a class="el" href="allvars_8c-source.html#l00111">All</a>, <a class="el" href="init_8c-source.html#l00165">check_omega()</a>, <a class="el" href="allvars_8h-source.html#l00328">global_data_all_processes::ComovingIntegrationOn</a>, <a class="el" href="allvars_8h-source.html#l00536">sph_particle_data::Density</a>, <a class="el" href="domain_8c-source.html#l00062">domain_Decomposition()</a>, <a class="el" href="allvars_8h-source.html#l00542">sph_particle_data::DtEntropy</a>, <a class="el" href="endrun_8c-source.html#l00025">endrun()</a>, <a class="el" href="allvars_8h-source.html#l00535">sph_particle_data::Entropy</a>, <a class="el" href="allvars_8h-source.html#l00631">io_header::flag_entropy_instead_u</a>, <a class="el" href="allvars_8c-source.html#l00036">Flag_FullStep</a>, <a class="el" href="forcetree_8c-source.html#l02622">force_treeallocate()</a>, <a class="el" href="allvars_8h-source.html#l00055">GAMMA_MINUS1</a>, <a class="el" href="system_8c-source.html#l00029">get_random_number()</a>, <a class="el" href="allvars_8h-source.html#l00497">particle_data::GravAccel</a>, <a class="el" href="allvars_8h-source.html#l00518">particle_data::GravCost</a>, <a class="el" href="allvars_8h-source.html#l00499">particle_data::GravPM</a>, <a class="el" href="allvars_8c-source.html#l00161">header</a>, <a class="el" href="allvars_8h-source.html#l00537">sph_particle_data::Hsml</a>, <a class="el" href="allvars_8h-source.html#l00543">sph_particle_data::HydroAccel</a>, <a class="el" href="allvars_8h-source.html#l00261">global_data_all_processes::ICFormat</a>, <a class="el" href="allvars_8h-source.html#l00470">global_data_all_processes::InitCondFile</a>, <a class="el" href="allvars_8h-source.html#l00091">MAX_NGB</a>, <a class="el" href="allvars_8h-source.html#l00256">global_data_all_processes::MaxPart</a>, <a class="el" href="ngb_8c-source.html#l00358">ngb_treeallocate()</a>, <a class="el" href="ngb_8c-source.html#l00403">ngb_treebuild()</a>, <a class="el" href="allvars_8h-source.html#l00345">global_data_all_processes::NumCurrentTiStep</a>, <a class="el" href="allvars_8h-source.html#l00297">global_data_all_processes::NumForcesSinceLastDomainDecomp</a>, <a class="el" href="allvars_8h-source.html#l00505">particle_data::OldAcc</a>, <a class="el" href="allvars_8c-source.html#l00119">P</a>, <a class="el" href="allvars_8h-source.html#l00329">global_data_all_processes::PeriodicBoundariesOn</a>, <a class="el" href="allvars_8h-source.html#l00367">global_data_all_processes::PM_Ti_begstep</a>, <a class="el" href="allvars_8h-source.html#l00366">global_data_all_processes::PM_Ti_endstep</a>, <a class="el" href="allvars_8h-source.html#l00504">particle_data::Potential</a>, <a class="el" href="proto_8h.html#a133">pow()</a>, <a class="el" href="read__ic_8c-source.html#l00031">read_ic()</a>, <a class="el" href="allvars_8c-source.html#l00026">RestartFlag</a>, <a class="el" href="proto_8h.html#a146">seed_glass()</a>, <a class="el" href="gravtree_8c-source.html#l00454">set_softenings()</a>, <a class="el" href="init_8c-source.html#l00202">setup_smoothinglengths()</a>, <a class="el" href="allvars_8h-source.html#l00338">global_data_all_processes::SnapshotFileCount</a>, <a class="el" href="allvars_8c-source.html#l00127">SphP</a>, <a class="el" href="allvars_8c-source.html#l00011">ThisTask</a>, <a class="el" href="allvars_8h-source.html#l00514">particle_data::Ti_begstep</a>, <a class="el" href="allvars_8h-source.html#l00359">global_data_all_processes::Ti_Current</a>, <a class="el" href="allvars_8h-source.html#l00513">particle_data::Ti_endstep</a>, <a class="el" href="allvars_8h-source.html#l00350">global_data_all_processes::Time</a>, <a class="el" href="allvars_8h-source.html#l00025">TIMEBASE</a>, <a class="el" href="allvars_8h-source.html#l00358">global_data_all_processes::Timebase_interval</a>, <a class="el" href="allvars_8h-source.html#l00351">global_data_all_processes::TimeBegin</a>, <a class="el" href="allvars_8h-source.html#l00343">global_data_all_processes::TimeBetStatistics</a>, <a class="el" href="allvars_8h-source.html#l00344">global_data_all_processes::TimeLastStatistics</a>, <a class="el" href="allvars_8h-source.html#l00353">global_data_all_processes::TimeMax</a>, <a class="el" href="allvars_8h-source.html#l00296">global_data_all_processes::TotNumOfForces</a>, <a class="el" href="allvars_8h-source.html#l00253">global_data_all_processes::TotNumPart</a>, <a class="el" href="allvars_8h-source.html#l00279">global_data_all_processes::TreeAllocFactor</a>, <a class="el" href="allvars_8h-source.html#l00433">global_data_all_processes::TreeDomainUpdateFrequency</a>, <a class="el" href="allvars_8c-source.html#l00034">TreeReconstructFlag</a>, <a class="el" href="allvars_8h-source.html#l00496">particle_data::Vel</a>, and <a class="el" href="allvars_8h-source.html#l00544">sph_particle_data::VelPred</a>.
<p>
Referenced by <a class="el" href="begrun_8c-source.html#l00028">begrun()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="init.c::setup_smoothinglengths"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void setup_smoothinglengths           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is used to find an initial smoothing length for each SPH particle. It guarantees that the number of neighbours will be between desired_ngb-MAXDEV and desired_ngb+MAXDEV. For simplicity, a first guess of the smoothing length is provided to the function <a class="el" href="density_8c.html#a8">density()</a>, which will then iterate if needed to find the right smoothing length. 
<p>
Definition at line <a class="el" href="init_8c-source.html#l00202">202</a> of file <a class="el" href="init_8c-source.html">init.c</a>.
<p>
References <a class="el" href="allvars_8c-source.html#l00111">All</a>, <a class="el" href="structNODE.html#o9">NODE::d</a>, <a class="el" href="allvars_8h-source.html#l00285">global_data_all_processes::DesNumNgb</a>, <a class="el" href="allvars_8c-source.html#l00148">Father</a>, <a class="el" href="allvars_8h-source.html#l00582">NODE::father</a>, <a class="el" href="allvars_8h-source.html#l00537">sph_particle_data::Hsml</a>, <a class="el" href="allvars_8h-source.html#l00566">NODE::len</a>, <a class="el" href="allvars_8h-source.html#l00495">particle_data::Mass</a>, <a class="el" href="allvars_8h-source.html#l00578">NODE::mass</a>, <a class="el" href="allvars_8c-source.html#l00141">Nodes</a>, <a class="el" href="allvars_8c-source.html#l00119">P</a>, <a class="el" href="proto_8h.html#a133">pow()</a>, <a class="el" href="allvars_8c-source.html#l00026">RestartFlag</a>, <a class="el" href="allvars_8c-source.html#l00127">SphP</a>, and <a class="el" href="structNODE.html#o10">NODE::u</a>.
<p>
Referenced by <a class="el" href="init_8c-source.html#l00020">init()</a>.    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat Apr 22 15:29:42 2006 for GADGET-2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
